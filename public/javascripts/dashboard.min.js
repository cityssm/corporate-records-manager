"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=exports.urlPrefix,t=parseInt(document.getElementById("search--limit").value,10),s=document.getElementById("search--offset"),n=document.getElementById("form--search"),a=document.getElementById("container--search"),r=function(r){r&&r.preventDefault(),cityssm.clearElement(a),a.innerHTML='<div class="has-text-grey has-text-centered"><i class="fas fa-4x fa-pulse fa-spinner" aria-hidden="true"></i><br />Searching Records...</div>';var o=parseInt(s.value,10);cityssm.postJSON(e+"/dashboard/doGetRecords",n,function(s){if(0!==s.records.length){var n,r=document.createElement("div");if(r.className="columns is-mobile is-align-items-center",r.innerHTML='<div class="column has-text-weight-bold">'+(o+1).toString()+" to "+Math.min(o+t,s.count).toString()+" of "+s.count.toString()+'</div><div class="column has-text-right"></div>',0!==o)(n=document.createElement("button")).className="button is-light is-info has-tooltip-left has-tooltip-arrow",n.setAttribute("data-tooltip","Previous Results"),n.type="button",n.setAttribute("aria-label","Previous Results"),n.innerHTML='<i class="fas fa-arrow-left" aria-hidden="true"></i>',n.addEventListener("click",i),r.getElementsByClassName("column")[1].appendChild(n);if(t+o<s.count)(n=document.createElement("button")).className="button is-outlined is-info",n.type="button",n.setAttribute("aria-label","Next Results"),n.innerHTML='<span>Next</span><span class="icon"><i class="fas fa-arrow-right" aria-hidden="true"></i></span>',n.addEventListener("click",c),r.getElementsByClassName("column")[1].appendChild(n);var l=document.createElement("div");l.className="panel";for(var d=0,u=s.records;d<u.length;d++){var m=u[d],p=exports.getRecordType(m.recordTypeKey),v=document.createElement("a");v.className="panel-block is-block",v.href=e+"/view/"+m.recordID.toString(),v.innerHTML='<div class="columns mb-0"><div class="column pb-0"><strong>'+cityssm.escapeHTML(m.recordTitle)+"</strong><br />"+p.recordType+" "+cityssm.escapeHTML(m.recordNumber)+'</div><div class="column is-narrow pb-0 has-text-right">'+cityssm.dateToString(new Date(m.recordDate))+'</div></div><span class="is-size-7">'+cityssm.escapeHTML(m.recordDescription.length>500?m.recordDescription.substring(0,497)+" ...":m.recordDescription)+"</span>",l.appendChild(v)}a.innerHTML="",a.appendChild(r),a.appendChild(l)}else a.innerHTML='<div class="message is-info"><div class="message-body">There are no records that match the search criteria.</div></div>'})},i=function(e){e&&e.preventDefault(),s.value=Math.max(parseInt(s.value,10)-t,0).toString(),r()},c=function(e){e&&e.preventDefault(),s.value=(parseInt(s.value,10)+t).toString(),r()},o=function(e){e&&e.preventDefault(),s.value="0",r()};n.addEventListener("submit",o),document.getElementById("search--recordTypeKey").addEventListener("change",o),document.getElementById("search--searchString").addEventListener("change",o),r()}();