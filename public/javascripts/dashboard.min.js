"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=exports.urlPrefix,t=exports.crm,a=parseInt(document.getElementById("search--limit").value,10),n=document.getElementById("search--offset"),s=document.getElementById("form--search"),i=document.getElementById("container--search"),r=function(r){r&&r.preventDefault(),cityssm.clearElement(i),i.innerHTML='<div class="has-text-grey has-text-centered"><i class="fas fa-4x fa-pulse fa-spinner" aria-hidden="true"></i><br />Searching Records...</div>';var c=parseInt(n.value,10);cityssm.postJSON(e+"/dashboard/doGetRecords",s,function(e){if(0!==e.records.length){var n,s=document.createElement("div");if(s.className="columns is-mobile is-align-items-center",s.innerHTML='<div class="column has-text-weight-bold">'+(c+1).toString()+" to "+Math.min(c+a,e.count).toString()+" of "+e.count.toString()+'</div><div class="column has-text-right"></div>',0!==c)(n=document.createElement("button")).className="button is-light is-info has-tooltip-left has-tooltip-arrow",n.setAttribute("data-tooltip","Previous Results"),n.type="button",n.setAttribute("aria-label","Previous Results"),n.innerHTML='<i class="fas fa-arrow-left" aria-hidden="true"></i>',n.addEventListener("click",l),s.getElementsByClassName("column")[1].appendChild(n);if(a+c<e.count)(n=document.createElement("button")).className="button is-outlined is-info",n.type="button",n.setAttribute("aria-label","Next Results"),n.innerHTML='<span>Next</span><span class="icon"><i class="fas fa-arrow-right" aria-hidden="true"></i></span>',n.addEventListener("click",o),s.getElementsByClassName("column")[1].appendChild(n);var r=document.createElement("div");r.className="panel";for(var d=0,u=e.records;d<u.length;d++){var m=u[d],h=t.renderRecordPanelLinkEle(m,{panelTag:"a"});r.appendChild(h)}i.innerHTML="",i.appendChild(s),i.appendChild(r)}else i.innerHTML='<div class="message is-info"><div class="message-body">There are no records that match the search criteria.</div></div>'})},l=function(e){e&&e.preventDefault(),n.value=Math.max(parseInt(n.value,10)-a,0).toString(),r()},o=function(e){e&&e.preventDefault(),n.value=(parseInt(n.value,10)+a).toString(),r()},c=function(e){e&&e.preventDefault(),n.value="0",r()};s.addEventListener("submit",c),document.getElementById("search--recordTypeKey").addEventListener("change",c),document.getElementById("search--searchString").addEventListener("change",c),r()}();