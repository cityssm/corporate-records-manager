"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=exports.urlPrefix,t=exports.crm,n=parseInt(document.getElementById("search--limit").value,10),a=document.getElementById("search--offset"),s=document.getElementById("form--search"),i=document.getElementById("container--search"),r=function(r){r&&r.preventDefault(),cityssm.clearElement(i),i.innerHTML='<div class="has-text-grey has-text-centered"><i class="fas fa-4x fa-pulse fa-spinner" aria-hidden="true"></i><br />Searching Records...</div>';var o=parseInt(a.value,10);cityssm.postJSON(e+"/dashboard/doGetRecords",s,function(e){if(0!==e.records.length){var a,s=document.createElement("div");if(s.className="columns is-mobile is-align-items-center",s.innerHTML='<div class="column has-text-weight-bold">'+(o+1).toString()+" to "+Math.min(o+n,e.count).toString()+" of "+e.count.toString()+'</div><div class="column has-text-right"></div>',0!==o)(a=document.createElement("button")).className="button is-light is-info has-tooltip-left has-tooltip-arrow",a.setAttribute("data-tooltip","Previous Results"),a.type="button",a.setAttribute("aria-label","Previous Results"),a.innerHTML='<i class="fas fa-arrow-left" aria-hidden="true"></i>',a.addEventListener("click",l),s.getElementsByClassName("column")[1].appendChild(a);if(n+o<e.count)(a=document.createElement("button")).className="button is-outlined is-info",a.type="button",a.setAttribute("aria-label","Next Results"),a.innerHTML='<span>Next</span><span class="icon"><i class="fas fa-arrow-right" aria-hidden="true"></i></span>',a.addEventListener("click",c),s.getElementsByClassName("column")[1].appendChild(a);var r=document.createElement("div");r.className="panel";for(var d=0,u=e.records;d<u.length;d++){var m=u[d],v=t.renderRecordPanelLinkEle(m,{panelTag:"a"});r.appendChild(v)}i.innerHTML="",i.appendChild(s),i.appendChild(r)}else i.innerHTML='<div class="message is-info"><div class="message-body">There are no records that match the search criteria.</div></div>'})},l=function(e){e&&e.preventDefault(),a.value=Math.max(parseInt(a.value,10)-n,0).toString(),r()},c=function(e){e&&e.preventDefault(),a.value=(parseInt(a.value,10)+n).toString(),r()},o=function(e){e&&e.preventDefault(),a.value="0",r()};s.addEventListener("submit",o),s.querySelectorAll("input, select").forEach(function(e){e.addEventListener("change",o)}),r(),document.getElementById("button--searchMoreFiltersToggle").addEventListener("click",function(){var e=document.getElementById("fieldset--searchMoreFilters");e.classList.toggle("is-hidden"),e.classList.contains("is-hidden")?e.disabled=!0:e.disabled=!1,o()})}(),function(){var e=cityssm.dateToString(new Date),t=document.getElementById("search--recordDateString-gte"),n=document.getElementById("search--recordDateString-lte");t.addEventListener("change",function(){n.min=t.value}),n.addEventListener("change",function(){var a=n.value;""===a&&(a=e),t.max=a})}();