(()=>{const e=exports.urlPrefix,t=""===document.getElementById("record--recordID").value,n=document.getElementById("form--record"),s=()=>{cityssm.enableNavBlocker()};n.addEventListener("submit",s=>{s.preventDefault();const a=e+(t?"/new/doCreate":"/edit/doUpdate");cityssm.postJSON(a,n,n=>{n.success?(cityssm.disableNavBlocker(),t?window.location.href=e+"/edit/"+n.recordID.toString():cityssm.alertModal("Record Updated Successfully","","OK","success")):cityssm.alertModal("Error While Saving",n.message,"OK","danger")})});const a=e=>{e.preventDefault();const t=e.currentTarget.closest(".tag"),n=t.getElementsByTagName("input")[0].value;cityssm.confirmModal("Remove Tag?",'Are you sure you want to remove the <span class="tag">'+cityssm.escapeHTML(n)+"</span> tag?","Yes, Remove the Tag","warning",()=>{t.remove(),s()})};document.getElementById("is-add-tag-button").addEventListener("click",()=>{let e;const t=t=>{t.preventDefault();const n=document.getElementById("addTag--tag");""!==n.value?((e=>{const t=cityssm.escapeHTML(e),n=document.createElement("span");n.className="tag is-medium",n.innerHTML='<input name="tags" type="hidden" value="'+t+'" /> '+t+' <button class="delete" type="button" aria-label="Remove Tag"></button>',n.getElementsByTagName("button")[0].addEventListener("click",a),document.getElementById("container--tags").insertAdjacentElement("afterbegin",n),s()})(n.value),n.value="",n.focus()):e()};cityssm.openHtmlModal("tag-add",{onshown:(n,s)=>{e=s,document.getElementById("form--addTag").addEventListener("submit",t)}})});const o=document.getElementsByClassName("is-remove-tag-button");for(let e=0;e<o.length;e+=1)o[e].addEventListener("click",a)})(),(()=>{const e=e=>{e.preventDefault();const t=e.currentTarget.closest(".field").getElementsByTagName("input")[0],n=t.nextElementSibling.children;t.hasAttribute("readonly")?t.removeAttribute("readonly"):t.setAttribute("readonly","readonly");for(let e=0;e<n.length;e+=1)n[e].classList.toggle("is-hidden")},t=document.getElementsByClassName("is-lock-toggle-button");for(let n=0;n<t.length;n+=1)t[n].addEventListener("click",e)})();export{};