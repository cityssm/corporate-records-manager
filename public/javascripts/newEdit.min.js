"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=exports.urlPrefix,t=""===document.getElementById("record--recordID").value,n=document.getElementById("form--record"),a=function(){cityssm.enableNavBlocker()};n.addEventListener("submit",function(a){a.preventDefault();var s=e+(t?"/new/doCreate":"/edit/doUpdate");cityssm.postJSON(s,n,function(n){n.success?(cityssm.disableNavBlocker(),t?window.location.href=e+"/records/edit/"+n.recordID.toString():cityssm.alertModal("Record Updated Successfully","","OK","success")):cityssm.alertModal("Error While Saving",n.message,"OK","danger")})});var s=function(e){e.preventDefault();var t=e.currentTarget.closest(".tag"),n=t.getElementsByTagName("input")[0].value;cityssm.confirmModal("Remove Tag?",'Are you sure you want to remove the <span class="tag">'+cityssm.escapeHTML(n)+"</span> tag?","Yes, Remove the Tag","warning",function(){t.remove(),a()})};document.getElementById("is-add-tag-button").addEventListener("click",function(){var e,t=function(t){t.preventDefault();var n,r,o,c=document.getElementById("addTag--tag");""!==c.value?(n=c.value,r=cityssm.escapeHTML(n),(o=document.createElement("span")).className="tag is-medium",o.innerHTML='<input name="tags" type="hidden" value="'+r+'" /> '+r+' <button class="delete" type="button" aria-label="Remove Tag"></button>',o.getElementsByTagName("button")[0].addEventListener("click",s),document.getElementById("container--tags").insertAdjacentElement("afterbegin",o),a(),c.value="",c.focus()):e()};cityssm.openHtmlModal("tag-add",{onshown:function(n,a){e=a,document.getElementById("form--addTag").addEventListener("submit",t)}})});for(var r=document.getElementsByClassName("is-remove-tag-button"),o=0;o<r.length;o+=1)r[o].addEventListener("click",s)}(),function(){for(var e=function(e){e.preventDefault();var t=e.currentTarget.closest(".field").getElementsByTagName("input")[0],n=t.nextElementSibling.children;t.hasAttribute("readonly")?t.removeAttribute("readonly"):t.setAttribute("readonly","readonly");for(var a=0;a<n.length;a+=1)n[a].classList.toggle("is-hidden")},t=document.getElementsByClassName("is-lock-toggle-button"),n=0;n<t.length;n+=1)t[n].addEventListener("click",e)}();